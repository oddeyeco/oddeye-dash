var socket;var stompClient;var timeformat="DD/MM HH:mm:ss";var timeformatsmall="HH:mm:ss";var errorlistJson={};var array_regular=[];var array_spec=[];var strop="<option value='~'>"+locale.contains+"</option><option value='!~'>"+locale.doesntContain+"</option><option value='=='>"+locale.equal+"</option><option value='!='>"+locale.notEqual+"</option>";var eniumop="<option value='='>"+locale.is+"</option><option value='!'>"+locale.isNot+"</option>";function redrawBoard(){$(".monitorlist ul").html("");if(Object.keys(errorlistJson).length>0){DrawErrorList(errorlistJson,$(".metrictable"))}}function connectstompClient(){var a={};a[headerName]=token;a.sotoken=sotoken;a.options=JSON.stringify(optionsJson);realtimeconnect(a)}function realtimeconnect(a){console.log("connect START");socket=new SockJS(cp+"/subscribe");stompClient=Stomp.over(socket);stompClient.debug=null;stompClient.connect(a,function(b){console.log("Monitor connected");stompClient.subscribe("/user/"+uuid+"/"+sotoken+"/errors",aftersubscribe)},function(b){console.log("Monitor:"+b);setTimeout(function(){realtimeconnect(a)},6000)})}function aftersubscribe(a){$(".metrictable").find("tr.wait").remove();var b=JSON.parse(a.body);if(errorlistJson[b.hash]){b.index=errorlistJson[b.hash].index}if(typeof(b.index)!=="undefined"){b.index=b.index+1}else{b.index=0}if(errorlistJson[b.hash]){if(b.time>=errorlistJson[b.hash].time){if(b.level===-1){delete errorlistJson[b.hash]}else{errorlistJson[b.hash]=b}reDrawErrorList(errorlistJson,"monitorlist",b)}}else{if(b.level===-1){delete errorlistJson[b.hash]}else{errorlistJson[b.hash]=b}reDrawErrorList(errorlistJson,"monitorlist",b)}if(Object.keys(errorlistJson).length>200){$("#manyalert").fadeIn()}else{$("#manyalert").fadeOut()}}function findeByhash(b,c){for(var a=0;a<c.length;a++){if(c[a].hash===b.hash){return a}}return -1}function findeBy_ihash(b,c){for(var a=0;a<c.length;a++){if(c[a].hash===b){return a}}return -1}function drawUL(r,p,a,g){if(typeof(a)==="undefined"){a=null}if(typeof(g)===g){type=false}var i="";if(r.isspec===1){i=r.message}else{var t=0;var e=0;for(var s in r.values){t=t+r.values[s].value;e++}t=t/e;if(t>1000){t=format_metric(r.values[s].value)}else{if(!Number.isInteger(t)){t=t.toFixed(2)}}i=i+t}var f="";if(typeof(r.time)!=="undefined"){f=moment(r.time*1).format(timeformatsmall)}var h="";var n="red";if(r.action===2){h="fas fa-long-arrow-alt-down";n="green"}if(r.action===3){h="fas fa-long-arrow-alt-up";n="red"}var k="level_"+r.level;var o="regularlist";if(r.isspec!==0){k=k+" spec";o="speciallist"}if(r.flap>5){console.log(r.info.name+" "+r.flap);k=k+" flapdetect"}if(!g){var j='<li style="display:none" id="'+r.hash+'" class="'+k+'" time="'+moment().format("x")+'">';var l=/_/gi;optionsJson.f_col.forEach(function(x){var A=$(".f_col option[value="+x+"]");switch(A.attr("key")){case"actions":if(r.isspec===0){j=j+'<div class="icons"><i class="float-left action fa '+h+'" style="color:'+n+';"></i> <a href="'+cp+"/chart/"+r.hash+'" target="_blank"><i class="fa fas fa-chart-area"></i></a><a href="'+cp+"/history/"+r.hash+'" target="_blank"><i class="fa fa-history"></i></a><a href="#"><i class="fa far fa-bell-slash resetregretion"></i></a><a href="#"><i class="fa far fa-trash-alt deletemetric"></i></a></div>'}else{j=j+'<div class="icons"><i class="fa fa-bell float-left"></i> <a href="'+cp+"/history/"+r.hash+'" target="_blank"><i class="fa fa-history"></i></a><a href="#"><i class="fa far fa-trash-alt deletemetric"></i></a></div>'}break;case"message":if(r.isspec!==0){j=j+'<div class="message"><i class="fa fa-comment-o"></i> '+i+"</div>"}break;case"info":if(r.isspec===0){var w="fas fa-long-arrow-alt-down";if(r.upstate){w="fas fa-long-arrow-alt-up"}j=j+'<div class="valueinfo"><i class="action fa '+w+'"></i> '+i+"</div>"}break;case"StartTime":var v=r.starttimes[r.level]?r.starttimes[r.level]:r.time;j=j+'<div class="inline starttime">'+moment(v*1).format(timeformat)+"</div>";break;case"LastTime":var v=r.time;j=j+'<div class="inline timelocal">'+moment(v*1).format(timeformatsmall)+"</div>";break;case"updateinterval":var v=r.starttimes[r.level]?r.starttimes[r.level]:r.time;j=j+'<div class="inline timeinterval badge bg-white">0</div>';break;case"updatecounter":j=j+'<div class="inline updatecounter badge">0</div>';break;case"duration":var v=r.starttimes[r.level]?r.starttimes[r.level]:r.time;var u=r.time;j=j+'<div class="inline duration badge">'+moment.duration(u-v).humanize()+"</div>";break;case"levelname":j=j+'<div class="label label-info level inline">'+locale["level_"+r.level]+"</div>";break;case"info.name":var y=r.info.name;if(r.isspec===0){if(y){j=j+'<div class="metricname '+x.replace(l," ")+'"><div> <i class="samegroup fas fa-object-group" data-key="_name" data-value="'+y+'" data-toggle="tooltip" data-placement="top" title="'+locale["title.selectIdentic"]+'"></i> <a href="'+cp+"/metriq/"+r.hash+'" target="_blank">'+y+"</a></div></div>"}}else{j=j+'<div class="metricname '+x.replace(l," ")+'"><div> <i class="samegroup fas fa-object-group" data-key="_name" data-value="'+y+'" data-toggle="tooltip" data-placement="top" title="'+locale["title.selectIdentic"]+'"></i> '+y+"</div></div>"}break;default:if(A.attr("key")){var z=A.attr("key").split(".")}else{var z=x.split("_")}var y=r;$.each(z,function(B,C){if(y){y=y[C]}});if(y){j=j+'<div class="'+x.replace(l," ")+'"><div><i class="samegroup fas fa-object-group" data-key="'+z.join("_")+'" data-value="'+y+'" data-toggle="tooltip" data-placement="top" title ="'+locale["title.selectIdentic"]+'"></i> '+y+"</div></div>"}break}});j=j+"</li>";$("."+p).find("ul#"+o).prepend(j);$("."+p).find("li#"+r.hash).find('[data-toggle="tooltip"]').tooltip();$("."+p).find("li#"+r.hash).show("slide",{direction:"left"},1000)}else{$("."+p).find("li#"+a+" .info.metricname").effect("shake",{direction:"down",distance:2},"slow");$("."+p).find("li#"+a).removeClass(function(u,v){return(v.match(/(^|\s)level_\S+/g)||[]).join(" ")});$("."+p).find("li#"+a).addClass("level_"+r.level);$("."+p).find("li#"+a+" .level").html(locale["level_"+r.level]);var m=r.starttimes[r.level]?r.starttimes[r.level]:r.time;var d=r.time;$("."+p).find("li#"+a+" .duration").html(moment.duration(d-m).humanize());if(r.starttimes[r.level]){$("."+p).find("li#"+a+" .starttime").html(moment(m*1).format(timeformat))}var q=moment(d);$("."+p).find("li#"+a+" .timelocal").html(q.format(timeformatsmall));$("."+p).find("li#"+a).attr("time",moment().format("x"));var b=$("."+p).find("li#"+a+" .updatecounter");var t=b.text()*1+1;b.text(t);if(r.isspec===0){var c="fas fa-long-arrow-alt-down";if(r.upstate){c="fas fa-long-arrow-alt-up"}$("."+p).find("li#"+a+" .valueinfo").html('<i class="action fa '+c+'"></i> '+i)}else{$("."+p).find("li#"+a+" .message").html('<i class="action fa fa-comment-o"></i> '+i)}if(h!==""){$("."+p).find("li#"+a+" .icons i.action").attr("class","action float-left fa "+h);$("."+p).find("li#"+a+" .icons i.action").css("color",n)}}$(".summary .Tablecount").html(array_regular.length+array_spec.length);$(".summary .regcount").html(array_regular.length);$(".summary .Speccount").html(array_spec.length)}function reDrawErrorList(b,e,f){var d=checkfilter(f);if(!d){delete b[f.hash]}if(f.isspec===0){var i=findeByhash(f,array_regular);if(d){if(i===-1){array_regular.push(f);var h=findeByhash(f,array_regular);if(h<array_regular.length-1){drawUL(array_regular[h],e,array_regular[h+1].hash)}else{drawUL(array_regular[h],e)}}else{array_regular[i]=f;drawUL(array_regular[i],e,array_regular[i].hash,true)}}else{if(i!==-1){array_regular.splice(i,1)}f.index=0;var c=f.hash;$("."+e).find("li#"+c).hide("slide",{direction:"left"},1000,function(){$("."+e).find("li#"+c).remove();$("."+e).find(".ui-effects-placeholder").remove()})}}else{var g=findeByhash(f,array_spec);if(d){if(g===-1){array_spec.push(f);var h=findeByhash(f,array_spec);if(h<array_spec.length-1){drawUL(array_spec[h],e,array_spec[h+1].hash)}else{drawUL(array_spec[h],e,0)}}else{array_spec[g]=f;drawUL(array_spec[g],e,array_spec[g].hash,true)}}else{if(g!==-1){array_spec.splice(g,1)}f.index=0;var a=f.hash;$("."+e).find("li#"+a).fadeOut(400,function(){$("."+e).find("li#"+a).remove();$("."+e).find(".ui-effects-placeholder").remove()})}}}function DrawErrorList(b,c){array_regular=[];array_spec=[];for(var a in b){var e=b[a];var d=checkfilter(e);if(d){if(e.isspec===0){array_regular.push(e)}else{array_spec.push(e)}}else{delete b[a]}}for(a in array_spec){drawUL(array_spec[a],"monitorlist")}for(a in array_regular){drawUL(array_regular[a],"monitorlist")}c.find("tbody input.rawflat").iCheck({checkboxClass:"icheckbox_flat-green",radioClass:"iradio_flat-green"})}function checkfilter(e){var h=true;for(var b in optionsJson.v){if((b==="allfilter")||((b==="mlfilter")&&(e.isspec===0))||((b==="manualfilter")&&(e.isspec!==0))){for(var d in optionsJson.v[b]){var c=optionsJson.v[b][d];var a=optionsJson.op[b][d];var g=d.split(".");var f=e;$.each(g,function(j,k){f=f[k]});if(a==="="){h=c.indexOf(""+f)!==-1}else{if(a==="!"){h=c.indexOf(""+f)===-1}else{if(a==="~"){h=f.indexOf(""+c)!==-1}else{if(a==="!~"){h=f.indexOf(""+c)===-1}else{if(a==="=="){h=f===c}else{if(a==="!="){h=f!==c}else{}}}}}}if(!h){break}}}if(!h){break}}return h}$(document).ready(function(){$("body").on("click","#apply_filter",function(){updateFilter();stompClient.send("/input/chagefilter/",{},JSON.stringify(optionsJson));redrawBoard()});$("body").on("click","#Show_chart",function(){hashes="";if($("#regularlist li.selected").length===1){hashes="/"+$("#regularlist li.selected").first().attr("id")}else{hashes="?hashes=";$("#regularlist li.selected").each(function(){hashes=hashes+$(this).attr("id")+";"})}var m=window.open(cp+"/chart"+hashes,"_blank");m.focus()});function c(){var m={};m.hash=$(this).attr("id");var o=$("meta[name='_csrf_header']").attr("content");var n=$("meta[name='_csrf']").attr("content");url=cp+"/resetregression";$.ajax({dataType:"json",type:"POST",url:url,data:m,beforeSend:function(p){p.setRequestHeader(o,n)}}).done(function(p){if(p.sucsses){console.log("Message Sended "+m.hash)}else{console.log("Request failed "+m.hash)}}).fail(function(p,q){console.log("Request failed")})}$("body").on("click",".monitorlist li ul li a",function(m){m.stopPropagation()});$("body").on("click",".deletemetric",function(m){m.stopPropagation();$(this).closest("li").each(function(){$.getJSON(cp+"/deletemetrics?hash="+$(this).attr("id"),function(o){});var n=findeBy_ihash($(this).attr("id"),array_regular);if(n!==-1){array_regular.splice(n,1)}n=findeBy_ihash($(this).attr("id")*1,array_spec);if(n!==-1){array_spec.splice(n,1)}$(this).hide("slide",{direction:"left"},1000,function(){$(this).remove();$(this).parent().remove(".ui-effects-placeholder")})})});$("body").on("click",".resetregretion",function(m){m.stopPropagation();$(this).closest("li").each(c)});$("body").on("click","#Clear_reg",function(m){$("#regularlist li.selected").each(c)});$("body").on("click","#Move_down",function(m){$("li.selected").each(function(){$(this).hide("slide",{direction:"left"},1000,function(){$(this).parent().append(this);$(this).show("slide",{direction:"left"},1000)})})});$("body").on("click","#Move_top",function(m){$("li.selected").each(function(){$(this).hide("slide",{direction:"left"},1000,function(){$(this).parent().prepend(this);$(this).show("slide",{direction:"left"},1000)})})});$("body").on("click","#add_filter",function(){updateFilter();var m={};url=cp+"/addmonitoringpage/";m.optionsjson=JSON.stringify(optionsJson);m.optionsname=$("#saveas_name").val();var o=$("meta[name='_csrf_header']").attr("content");var n=$("meta[name='_csrf']").attr("content");$.ajax({dataType:"json",type:"POST",url:url,data:m,beforeSend:function(p){p.setRequestHeader(o,n)}}).done(function(p){if(p.sucsses){$("#saveModal .modal-title").text(locale["dashboard.Modal.successfullySaved"]);$("#saveModal").modal("show");setTimeout(function(){$("#saveModal").modal("hide")},2000)}else{$("#saveModal .modal-title").text(locale["dash.errorSavingData"]);$("#saveModal").modal("show");setTimeout(function(){$("#saveModal").modal("hide")},2000)}}).fail(function(p,q){alert(locale.requestFailed)})});$("body").on("click","#save_filter",function(){updateFilter();var m={};url=cp+"/addmonitoringpage/";m.optionsjson=JSON.stringify(optionsJson);m.optionsname=nameoptions;var o=$("meta[name='_csrf_header']").attr("content");var n=$("meta[name='_csrf']").attr("content");$.ajax({dataType:"json",type:"POST",url:url,data:m,beforeSend:function(p){p.setRequestHeader(o,n)}}).done(function(p){if(p.sucsses){$("#saveModal .modal-title").text(locale["dashboard.Modal.successfullySaved"]);$("#saveModal").modal("show");setTimeout(function(){$("#saveModal").modal("hide")},2000)}else{$("#saveModal .modal-title").text(locale["dash.errorSavingData"]);$("#saveModal").modal("show");setTimeout(function(){$("#saveModal").modal("hide")},2000)}}).fail(function(p,q){alert(locale.requestFailed)})});$("body").on("click","#deleteviewconfirm",function(){url=cp+"/deletemonitoringpage/";sendData={optionsname:nameoptions};var n=$("meta[name='_csrf_header']").attr("content");var m=$("meta[name='_csrf']").attr("content");$.ajax({dataType:"json",type:"POST",url:url,data:sendData,beforeSend:function(o){o.setRequestHeader(n,m)}}).done(function(o){if(o.sucsses){window.location=cp+"/monitoring/"}else{alert(locale.requestFailed)}}).fail(function(o,p){alert(locale.requestFailed)})});$("body").on("click","#rem_filter",function(){$("#deleteConfirm").find(".btn-ok").attr("id","deleteviewconfirm");$("#deleteConfirm").find(".btn-ok").attr("class","btn btn-ok btn-outline-danger");$("#deleteConfirm").find(".modal-body p").html(locale["monitorings2.modal.confirmDelView"]);$("#deleteConfirm").find(".modal-body .text-warning").html(nameoptions);$("#deleteConfirm").modal("show")});setInterval(function(){$(".monitorlist li ul li").each(function(){var m=moment($(this).attr("time")*1).diff(moment())/-1000;$(this).find(".timeinterval").text(m.toFixed(0)+"sec.")})},1000);$("body").on("change",".add_filter_select",function(){$(this).find(":selected").attr("disabled","disabled");var m=$("<tr class='row m-0'>");if($(this).find(":selected").attr("value")==="level"){m.append("<th class='col-2 col-sm-2 col-md-1 filter_label'>"+$(this).find(":selected").attr("fname")+"</th>");m.append('<td class="col-2 col-sm-2 col-md-1 action"><select class="operators_'+$(this).find(":selected").attr("value")+'" name="op['+$(this).attr("id")+"_"+$(this).find(":selected").attr("value")+']">'+eniumop+"</select> </td>");m.append('<td class="col-8 col-sm-6 col-md-9 value"><select class="value" id="values_'+$(this).find(":selected").attr("value")+'_1" name="v['+$(this).attr("id")+"_"+$(this).find(":selected").attr("value")+'][]" multiple="multiple" size="4"><option value="0">'+locale.level_0+'</option><option value="1">'+locale.level_1+'</option><option value="2">'+locale.level_2+'</option><option value="3">'+locale.level_3+'</option><option value="4">'+locale.level_4+'</option><option value="5">'+locale.level_5+"</option></select></td>")}else{m.append("<th class='col-4 col-sm-2 col-md-2 filter_label'>"+$(this).find(":selected").attr("fname")+"</th>");m.append("<td class='col-3 col-sm-2 col-md-2 action'> <select class='operators_subject' name='op["+$(this).attr("id")+"_"+$(this).find(":selected").attr("value")+"]' tagkey='"+$(this).find(":selected").attr("value")+"'>"+strop+" </select> </td>");m.append("<td class='col-5 col-sm-6 col-md-7 value'><input class='filter-value' type='text' name='v["+$(this).attr("id")+"_"+$(this).find(":selected").attr("value")+"]' tagkey='"+$(this).find(":selected").attr("value")+"' autocomplete='off'></td>")}$(this).parents(".filter").find(".filters-table").append(m);$(this).find("option").prop("selected",function(){return this.defaultSelected});$("select").select2({minimumResultsForSearch:15})});$("body").on("change",".add_notifier_select",function(){var m=$("<div class='col-xl-4 col-lg-6 col-12'>");m.append("<div class='item notifier_label font-weight-bold'>"+$(this).find(":selected").attr("fname")+"</div>");m.append("<div class='item value'><input class='notifier-value' type='text' name='notifier-v["+$(this).find(":selected").attr("value")+"][]' autocomplete='off'></div>");$(this).parents(".filter-body").find(".notifiers-table").append(m);$(this).find("option").prop("selected",function(){return this.defaultSelected});$("select").select2({minimumResultsForSearch:15})});if(optionsJson===null){var j=[];for(var g in filterOldJson){var i=filterOldJson[g];if(g.indexOf("check_")!==-1){if(g.indexOf("check_level_")!==-1){j.push(g.replace("check_level_",""))}else{var l=$("<tr class='row m-0'>");var a=g.replace("check_","");var d=$(".all_filter .add_filter_select option[alias="+a+"]:first");d.attr("disabled","disabled");l.append("<th class='col-2 col-md-1 filter_label'>"+d.attr("fname")+"</th>");l.append("<td class='col-2 col-md-1 action'> <select class='operators_subject' name='op["+$(".all_filter .add_filter_select").attr("id")+"_"+d.attr("value")+"]' tagkey='"+d.attr("value")+"'>"+strop+" </select> </td>");l.append("<td class='col-8 col-md-9 value'><input class='filter-value' type='text' name='v["+$(".all_filter .add_filter_select").attr("id")+"_"+d.attr("value")+"]' tagkey='"+d.attr("value")+"' autocomplete='off' value="+filterOldJson[a+"_input"]+"></td>");$(".all_filter").find(".filters-table").append(l)}}}if(j.length>0){var l=$("<tr class='row m-0'>");var a="level";var d=$(".all_filter .add_filter_select option[value="+a+"]:first");d.attr("disabled","disabled");l.append("<th class='col-2 col-md-1 filter_label'>"+d.attr("fname")+"</th>");$(".all_filter").find(".filters-table").append(l);l.append('<td class="col-2 col-md-1 action"><select tagkey="'+d.attr("value")+'" class="operators_'+d.attr("value")+'" name="op['+$(".all_filter .add_filter_select").attr("id")+"_"+d.attr("value")+']">'+eniumop+"</select> </td>");l.append('<td class="col-8 col-md-9 value"><select tagkey="'+d.attr("value")+'"class="value" id="values_'+d.attr("value")+'_1" name="v['+$(".all_filter .add_filter_select").attr("id")+"_"+d.attr("value")+'][]" multiple="multiple" size="4"><option value="0" '+(j.indexOf("0")!==-1?' selected="selected" ':"")+">"+locale.level_0+'</option><option value="1" '+(j.indexOf("1")!==-1?' selected="selected" ':"")+">"+locale.level_1+'</option><option value="2" '+(j.indexOf("2")!==-1?' selected="selected" ':"")+">"+locale.level_2+'</option><option value="3" '+(j.indexOf("3")!==-1?' selected="selected" ':"")+">"+locale.level_3+'</option><option value="4" '+(j.indexOf("4")!==-1?' selected="selected" ':"")+">"+locale.level_4+'</option><option value="5" '+(j.indexOf("5")!==-1?' selected="selected" ':"")+">"+locale.level_5+"</option></select></td>")}$(".card-fields.value .f_col option").prop("selected","selected");updateFilter()}else{optionsJson.f_col.forEach(function(m){$(".card-fields.value .f_col option[value="+m+"]").prop("selected","selected")});for(var h in optionsJson.v){var e=$(".add_filter_select#"+h).parents(".filter");for(var b in optionsJson.v[h]){if(b==="level"){j=optionsJson.v[h][b];var l=$("<tr class='row m-0'>");var a="level";var d=e.find(".add_filter_select option[value="+a+"]:first");d.attr("disabled","disabled");l.append("<th class='col-2 col-sm-2 col-md-1 filter_label'>"+d.attr("fname")+"</th>");e.find(".filters-table").append(l);l.append('<td class="col-2 col-sm-2 col-md-1 action"><select tagkey="'+d.attr("value")+'" class="operators_'+d.attr("value")+'" name="op['+e.find(".add_filter_select").attr("id")+"_"+d.attr("value")+']">'+eniumop+"</select> </td>");l.find(".action option[value='"+optionsJson.op[h][b]+"']").prop("selected","selected");l.append('<td class="col-8 col-sm-6 col-md-9 value"><select tagkey="'+d.attr("value")+'"class="value" id="values_'+d.attr("value")+'_1" name="v['+e.find(".add_filter_select").attr("id")+"_"+d.attr("value")+'][]" multiple="multiple" size="4"><option value="0" '+(j.indexOf("0")!==-1?' selected="selected" ':"")+">"+locale.level_0+'</option><option value="1" '+(j.indexOf("1")!==-1?' selected="selected" ':"")+">"+locale.level_1+'</option><option value="2" '+(j.indexOf("2")!==-1?' selected="selected" ':"")+">"+locale.level_2+'</option><option value="3" '+(j.indexOf("3")!==-1?' selected="selected" ':"")+">"+locale.level_3+'</option><option value="4" '+(j.indexOf("4")!==-1?' selected="selected" ':"")+">"+locale.level_4+'</option><option value="5" '+(j.indexOf("5")!==-1?' selected="selected" ':"")+">"+locale.level_5+"</option></select></td>")}else{if(optionsJson.op[h]){var l=$("<tr class='row m-0'>");var a=b;var d=e.find(".add_filter_select option[value='"+a+"']:first");d.attr("disabled","disabled");l.append("<th class='col-3 col-md-3 filter_label'>"+d.attr("fname")+"</th>");l.append("<td class='col-3 col-md-3 action'> <select class='operators_subject' name='op["+e.find(".add_filter_select").attr("id")+"_"+d.attr("value")+"]' tagkey='"+d.attr("value")+"'>"+strop+" </select> </td>");l.append("<td class='col-6 col-md-5 value'><input class='filter-value' type='text' name='v["+e.find(".add_filter_select").attr("id")+"_"+d.attr("value")+"]' tagkey='"+d.attr("value")+"' autocomplete='off' value="+optionsJson.v[h][b]+"></td>");l.find(".action option[value='"+optionsJson.op[h][b]+"']").prop("selected","selected");e.find(".filters-table").append(l)}}}}var e=$(".add_notifier_select").parents(".filter-body");for(var k in optionsJson["notifier-v"]){a=k;var d=e.find(".add_notifier_select option[value='"+a+"']:first");for(var f in optionsJson["notifier-v"][k]){var l=$("<div class='col-xl-4 col-lg-6 col-12'>");l.append("<div class='item notifier_label font-weight-bold'>"+d.attr("fname")+"</div>");l.append("<div class='item value'><input class='notifier-value' type='text' name='notifier-v["+d.attr("value")+"][]' value='"+optionsJson["notifier-v"][k][f]+"' autocomplete='off'></div>");e.find(".notifiers-table").append(l)}}}$("body").on("click",".monitorlist li ul li .samegroup",function(p){p.stopPropagation();var o=p.ctrlKey;var m=$(this).attr("data-key");var n=$(this).attr("data-value");if(!o){$(".selected").toggleClass("selected")}$("[data-key='"+m+"'][data-value='"+n+"']").each(function(){$(this).parents("li:first").addClass("selected")});if($("#regularlist .selected").length>0){$(".selected-actions").show("slide",{direction:"right"},1000)}else{$(".selected-actions").hide("slide",{direction:"right"},1000)}$(".selected-actions .badge").text($("#regularlist .selected").length)});$("body").on("click",".monitorlist li ul li",function(m){$(this).toggleClass("selected");if($("#regularlist .selected").length>0){$(".selected-actions").show("slide",{direction:"right"},1000)}else{$(".selected-actions").hide("slide",{direction:"right"},1000)}$(".selected-actions .badge").text($("#regularlist .selected").length)});$("body").on("click","fieldset.collapsible legend",function(){if($(this).parent().hasClass("collapsed")){$(this).parent().removeClass("collapsed");$(this).find(".fa-chevron-down").addClass("fa-chevron-up");$(this).parent().find(".fa-chevron-down").removeClass("fa-chevron-down");$(this).parent().find("select").select2({minimumResultsForSearch:15})}else{$(this).parent().addClass("collapsed");$(this).find(".fa-chevron-up").addClass("fa-chevron-down");$(this).find(".fa-chevron-up").removeClass("fa-chevron-up")}});$("select").select2({minimumResultsForSearch:15});connectstompClient()});function updateFilter(){var b=$("form.form-options").serializeArray();optionsJson={};const a=/[a-zA-Z-.]+/g;jQuery.each(b,function(f,h){if(h.value!==""){var e=h.name;if(h.name.indexOf("op[")!==-1){e="op";if(!optionsJson[e]){optionsJson[e]={}}var c=h.name.match(a);var g=c[1];var j=c[2];if(!optionsJson[e][g]){optionsJson[e][g]={}}optionsJson[e][g][j]=h.value}else{if(h.name.indexOf("v[")!==-1){e=h.name.substring(0,h.name.indexOf("v[")+1);if(!optionsJson[e]){optionsJson[e]={}}if(h.name.indexOf("[]")!==-1){var d=h.name.replace("[]","");var c=d.match(a);var g=c[1];var j=c[2];if(j){if(!optionsJson[e][g]){optionsJson[e][g]={}}if(!optionsJson[e][g][j]){optionsJson[e][g][j]=[]}optionsJson[e][g][j].push(h.value)}else{if(!optionsJson[e][g]){optionsJson[e][g]=[]}optionsJson[e][g].push(h.value)}}else{var c=h.name.match(a);var g=c[1];var j=c[2];if(!optionsJson[e][g]){optionsJson[e][g]={}}optionsJson[e][g][j]=h.value}}else{if(h.name.indexOf("[]")!==-1){d=h.name.replace("[]","");if(!optionsJson[d]){optionsJson[d]=[]}optionsJson[d].push(h.value)}else{optionsJson[h.name]=h.value}}}}})};